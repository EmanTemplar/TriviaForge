### **v3.3.0** - Phase 1 Security Hardening (Dec 2025)
**Released:** December 17, 2025
**Branch:** `security-patches` (merged to `main`)

**Major Security Improvements:**
- ✅ CSRF Protection Implementation (csrf-csrf package)
- ✅ Rate Limiting on Authentication Endpoints
- ✅ Excel Import Migration (ExcelJS replaces vulnerable xlsx)
- ✅ Enhanced Error Handling and User Feedback
- ✅ Removed Password Logging from Production

**CSRF Protection:**
- Package: `csrf-csrf` v4.0.3 (modern replacement for deprecated csurf)
- Double-submit cookie pattern with httpOnly cookies
- Automatic token fetching and injection via axios interceptors
- Applied to all POST/PUT/DELETE endpoints
- Skip protection in DEBUG_MODE for easier testing

**Rate Limiting:**
- Package: `express-rate-limit` v8.2.1
- Auth endpoints: 5 attempts per 15 minutes
- Registration endpoints: 10 attempts per hour
- Auto-disabled in DEBUG_MODE
- Prevents brute-force attacks on authentication

**Excel Import Security:**
- Replaced vulnerable `xlsx` package (CVE: GHSA-4r6h-8v6p-xvw6, GHSA-5pgg-2g8v-p4x9) with `exceljs` v4.4.0
- Fixed Excel template download (blob MIME type correction)
- Fixed Excel import parsing (`includeEmpty: true` for eachRow)
- Enhanced error messages showing specific row validation failures

**Enhanced User Experience:**
- Detailed error messages from server displayed in UI
- Excel import shows specific row/column errors (not just "400 error")
- Template download with proper MIME type
- Error display timeout increased from 3s to 5s

**Security Fixes:**
- Removed password logging - passwords no longer logged to stdout
- Clean console logs in production

**Files Modified:**
- `app/server.js` - CSRF, rate limiting, ExcelJS migration, password log removal
- `app/src/composables/useApi.js` - CSRF token fetching and injection
- `app/src/pages/AdminPage.vue` - Error handling, version update to 3.3.0
- `app/package.json` - Added csrf-csrf, cookie-parser, express-rate-limit
- `.env.example` - Added CSRF_SECRET documentation
- `docker-compose.yml` - Added CSRF_SECRET environment variable

**Git Commits:**
- f7cdb27 - feat: Implement Phase 1 critical security fixes
- 3576603, b5fc22c, 3837177 - CSRF fixes
- 2bc3e05, 2ce5357 - Excel download fixes
- 88da05e - Excel import parsing fix
- 1d76041 - Enhanced error handling
- 2e34158 - Debug log cleanup

**Security Status:**
- ✅ 4 Critical vulnerabilities addressed (from SECURITY-AUDIT.md)
- Ready for Phase 2: HttpOnly cookies, Socket.IO auth, input validation

---
